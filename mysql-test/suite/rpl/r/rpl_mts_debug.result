include/master-slave.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the master.info repository is not secure and is therefore not recommended. Please see the MySQL Manual for more about this issue and possible alternatives.
[connection master]
CREATE DATABASE db_1;
CREATE DATABASE db_2;
CREATE TABLE db_1.test_1 (id INTEGER) engine=Innodb;
CREATE TABLE db_2.test_1 (id INTEGER) engine=Innodb;
include/stop_slave.inc
SET @@global.slave_parallel_workers= 2;
ALTER TABLE mysql.slave_relay_log_info ENGINE= Innodb;
ALTER TABLE mysql.slave_worker_info ENGINE= Innodb;
include/start_slave.inc
SET GLOBAL debug="d,mts_debug_concurrent_access";
INSERT INTO db_1.test_1 VALUES(1);
INSERT INTO db_2.test_1 VALUES(1);
DROP DATABASE db_1;
DROP DATABASE db_2;
include/stop_slave.inc
SET @@global.slave_parallel_workers= save_slave_parallel_workers;
SET @@global.debug= "";
include/start_slave.inc
call mtr.add_suppression('Error reading slave worker configuration');
call mtr.add_suppression('Failed during slave workers initialization');
call mtr.add_suppression('Failed during slave worker thread create');
include/stop_slave.inc
set @save.slave_checkpoint_group= @@global.slave_checkpoint_group;
set @save.slave_parallel_workers= @@global.slave_parallel_workers;
set @save.debug= @@global.debug;
SET @@global.debug= "d,mts_worker_thread_fails";
set @@global.slave_parallel_workers= 2;
start slave sql_thread;
include/wait_for_slave_sql_error.inc [errno=1593]
set @@global.slave_checkpoint_group= @save.slave_checkpoint_group;
set @@global.slave_parallel_workers= @save.slave_parallel_workers;
set @@global.debug= @save.debug;
include/start_slave.inc
include/rpl_reset.inc
include/stop_slave.inc
call mtr.add_suppression("option 'slave_checkpoint_group': unsigned value 524281 adjusted to 524280");
call mtr.add_suppression("Failed during slave worker thread create");
call mtr.add_suppression("Slave SQL: Failed during slave workers initialization, Error_code: 1593");
SET GLOBAL slave_parallel_workers= 2;
SET GLOBAL slave_checkpoint_group=524281;
Warnings:
Warning	1292	Truncated incorrect slave_checkpoint_group value: '524281'
include/start_slave.inc
include/assert.inc [Assert that slave_checkpoint_group was truncated to a valid value.]
include/check_slave_is_running.inc
include/rpl_reset.inc
include/stop_slave.inc
SET GLOBAL debug= "d,inject_init_worker_init_info_fault";
START SLAVE SQL_THREAD;
include/wait_for_slave_sql_error.inc [errno=1593]
SET GLOBAL debug="";
SET GLOBAL slave_checkpoint_group= 512;
SET GLOBAL slave_parallel_workers= 0;
include/start_slave.inc
include/rpl_reset.inc
include/rpl_end.inc
